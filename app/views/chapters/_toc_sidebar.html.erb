<!-- 目录侧边栏 -->
<div
  id="toc-sidebar"
  class="fixed inset-y-0 right-0 w-64 bg-white dark:bg-gray-800 shadow-lg transform translate-x-full transition-transform duration-300 z-50 flex flex-col"
  data-chapter-reader-target="tocSidebar"
>
  <div class="p-4">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold">目录</h3>
      <button
        type="button"
        data-action="chapter-reader#toggleToc"
        class="text-gray-500 hover:text-gray-700"
      >
        ✕
      </button>
    </div>
  </div>
  <ul class="flex-1 overflow-y-auto px-4 pb-4 space-y-2">
    <% chapters.each do |chapter| %>
      <li>
        <%= link_to chapter.title,
            book_chapter_path(book, chapter),
            class: "block px-3 py-2 rounded-lg #{chapter.id == current_chapter.id ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}" %>
      </li>
    <% end %>
  </ul>
</div>

<!-- 遮罩层 -->
<div
  id="toc-overlay"
  class="fixed inset-0 bg-black/50 hidden z-40"
  data-chapter-reader-target="tocOverlay"
  data-action="click->chapter-reader#toggleToc"
></div>
