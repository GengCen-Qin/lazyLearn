<% content_for :title, @video.title || "视频播放器" %>

<%= stylesheet_link_tag "plyr", "data-turbo-track": "reload" %>
<%= stylesheet_link_tag "video_player_tailwind_fix", "data-turbo-track": "reload" %>
<%= stylesheet_link_tag "word_lookup", "data-turbo-track": "reload" %>

<div
  class="video-subtitle-app-container h-screen flex flex-col bg-gray-50 dark:bg-gray-900"
  data-controller="video-subtitle-merged"
  data-video-subtitle-merged-video-path-value="<%= @video.video_file.attached? ? url_for(@video.video_file) : '' %>"
  data-video-subtitle-merged-subtitles-value="<%= (@video.formatted_transcription || []).to_json %>"
>
  <%= render 'videos/video_header', video: @video %>

  <!-- 主播放器布局 -->
  <div class="flex-1 overflow-hidden flex flex-col">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-3 sm:gap-4 md:gap-5 flex-1 overflow-hidden p-3 sm:p-4">
      <%= render 'videos/video_player', video: @video %>
      <%= render 'videos/subtitle_list', video: @video %>
    </div>

    <%= render 'videos/status_bar' %>
  </div>
</div>

<%= render 'videos/word_lookup_modal' %>
