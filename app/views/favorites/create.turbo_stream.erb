<%# 更新模态框中的收藏按钮 %>
<%= turbo_stream.update "favorite_button", partial: 'components/favorite_button', locals: { word: @word, favorited: true } %>

<%# 检查是否是第一个收藏，如果是则更新整个内容区域 %>
<% if Current.user.favorites.count == 1 %>
  <%= turbo_stream.update "favorites_content" do %>
    <div id="favorites_grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 max-h-[calc(100vh-20vh)] overflow-y-auto pr-2">
      <%= turbo_frame_tag "favorite_word_#{@word.id}" do %>
        <%= render partial: 'components/word_card', locals: { word: @word } %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <%# 在收藏列表的第一个位置插入新收藏的单词 %>
  <%= turbo_stream.prepend "favorites_grid" do %>
    <%= turbo_frame_tag "favorite_word_#{@word.id}" do %>
      <%= render partial: 'components/word_card', locals: { word: @word } %>
    <% end %>
  <% end %>
<% end %>